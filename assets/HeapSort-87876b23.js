var C=Object.defineProperty;var k=(t,s,e)=>s in t?C(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var n=(t,s,e)=>(k(t,typeof s!="symbol"?s+"":s,e),e);import{P as S,V as c,a as u}from"./painter-e02e082b.js";import{s as w}from"./shuffle-dbe9666a.js";import{s as l}from"./sleep-9eff569f.js";import{d as _,_ as V,o as f,f as m,j as h,i as a,w as v,t as d,k as H,l as P,v as g}from"./index-c9176d23.js";/* empty css              */class b{constructor(s){n(this,"painter");n(this,"width");n(this,"height");n(this,"values");n(this,"n");n(this,"hn");n(this,"hi");n(this,"stepsPer100ms");n(this,"stepsPer10ms");n(this,"compsCounter");n(this,"stepsCounter");n(this,"finished");n(this,"curPid");this.painter=new S(s),this.width=s.width,this.height=s.height,this.values=[],this.n=100,this.hn=0,this.hi=0,this.stepsPer100ms=5,this.stepsPer10ms=1/0,this.compsCounter=0,this.stepsCounter=0,this.finished=!1,this.curPid=0}setup(s){s&&(this.n=s.n,s.stepsPerSecond<100?(this.stepsPer100ms=Math.round(s.stepsPerSecond/10),this.stepsPer10ms=1/0):(this.stepsPer10ms=Math.round(s.stepsPerSecond/100),this.stepsPer100ms=1/0)),this.finished=!1,this.compsCounter=0,this.stepsCounter=0,this.values=[];for(let e=1;e<=this.n;++e)this.values.push(e);w(this.values),this.curPid++,this.heapSort(this.curPid)}async heapSort(s){if(s==this.curPid){for(let e=Math.floor(this.n/2)-1;e>=0;--e){if(s!=this.curPid)return;this.compsCounter++,this.stepsCounter++,this.stepsCounter%this.stepsPer100ms==0?(this.renderValues(),await l(100)):this.stepsCounter%this.stepsPer10ms==0&&(this.renderValues(),await l(10)),await this.heapify(s,this.n,e)}for(let e=this.n-1;e>0;--e){if(s!=this.curPid)return;this.compsCounter++,this.stepsCounter++,this.stepsCounter%this.stepsPer100ms==0?(this.renderValues(),await l(100)):this.stepsCounter%this.stepsPer10ms==0&&(this.renderValues(),await l(10));const r=this.values[0];this.values[0]=this.values[e],this.values[e]=r,await this.heapify(s,e,0)}this.finished=!0,this.renderValues()}}async heapify(s,e,r){if(s!=this.curPid)return;this.hn=e,this.hi=r,this.stepsCounter++,this.compsCounter+=3,this.stepsCounter%this.stepsPer100ms==0?(this.renderValues(),await l(100)):this.stepsCounter%this.stepsPer10ms==0&&(this.renderValues(),await l(10));let i=r;const p=2*r+1,o=2*r+2;if(p<e&&this.values[p]>this.values[i]&&(i=p),o<e&&this.values[o]>this.values[i]&&(i=o),i!=r){const y=this.values[r];this.values[r]=this.values[i],this.values[i]=y,await this.heapify(s,e,i)}}renderValues(){this.painter.background("#282a36");const s=this.width/this.n,r=this.height/this.n;for(let i=0;i<this.n;++i){this.painter.setStrokeWeight(s+1),this.painter.stroke("#f8f8f2"),i==this.hi?this.painter.stroke("#8be9fd"):i==this.hn&&this.painter.stroke("#ffb86c"),(i==this.hi||i==this.hn)&&!this.finished&&this.painter.setStrokeWeight(Math.max(s+1,7)),this.finished&&this.painter.stroke("#50fa7b");const p=r*this.values[i];this.painter.line(i*s+s/2,this.height-p,i*s+s/2,this.height)}}}const M=_({name:"HeapSort",data:()=>({canvasWidth:2e3,canvasHeight:1125,sketch:{},n:100,stepsPerSecond:50}),mounted(){const t=document.getElementById("sketch");t&&S.isCanvas(t)&&(this.sketch=new b(t),this.sketch.setup())}});const N={class:"sort-page"},W=h("h1",{style:{"margin-top":"20px"}},[h("a",{href:"https://en.wikipedia.org/wiki/Heapsort"},"Heap Sort")],-1),$=h("h3",null,"Time complexity O(n log n)",-1),B=h("h3",{style:{"margin-bottom":"20px"}},"Space complexity O(1)",-1),I={class:"stats"},T={key:0},x=["width","height"],z={class:"controls"},D={style:{"font-size":"large"}},E=h("div",{style:{height:"20px"}},null,-1),O={style:{"font-size":"large"}};function U(t,s,e,r,i,p){return f(),m("div",N,[W,$,B,h("div",I,[a(c,null,{default:v(()=>[h("span",null,d(t.sketch.compsCounter)+" comparisons",1),a(u),t.sketch.values?(f(),m("span",T,"N: "+d(t.sketch.values.length),1)):H("",!0),a(u),h("span",null,"Steps per second: "+d(t.stepsPerSecond),1)]),_:1})]),h("canvas",{id:"sketch",width:t.canvasWidth,height:t.canvasHeight},null,8,x),h("div",z,[a(c,null,{default:v(()=>[h("button",{onClick:s[0]||(s[0]=o=>t.sketch.setup({n:t.n,stepsPerSecond:t.stepsPerSecond}))}," START "),a(u),h("span",D,"N: "+d(t.n),1),a(u),P(h("input",{style:{width:"min(100%, 800px)"},"onUpdate:modelValue":s[1]||(s[1]=o=>t.n=o),type:"range",min:"10",max:"2000",step:"10"},null,512),[[g,t.n]]),E,h("span",O,"Steps per second: "+d(t.stepsPerSecond),1),a(u),P(h("input",{style:{width:"min(100%, 800px)"},"onUpdate:modelValue":s[2]||(s[2]=o=>t.stepsPerSecond=o),type:"range",min:"10",max:"5000",step:"10"},null,512),[[g,t.stepsPerSecond]])]),_:1})])])}const J=V(M,[["render",U]]);export{J as default};
