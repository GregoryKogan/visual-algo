var S=Object.defineProperty;var g=(s,t,e)=>t in s?S(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var i=(s,t,e)=>(g(s,typeof t!="symbol"?t+"":t,e),e);import{P as F,V as d,a as p}from"./painter-e02e082b.js";import{s as w}from"./shuffle-dbe9666a.js";import{d as y,_ as P,o as f,f as m,j as a,i as n,w as c,t as o,k as j,l as k,v}from"./index-c9176d23.js";/* empty css              */class _{constructor(t){i(this,"painter");i(this,"width");i(this,"height");i(this,"dt");i(this,"lastDts");i(this,"dtMemory");i(this,"lastFrame");i(this,"fps");i(this,"values");i(this,"n");i(this,"curSize");i(this,"maxInd");i(this,"i");i(this,"j");i(this,"firstFlip");i(this,"secondFlip");i(this,"flipsCounter");i(this,"itersCounter");i(this,"stepsPerFrame");i(this,"finished");this.painter=new F(t),this.width=t.width,this.height=t.height,this.dt=1,this.lastDts=[],this.dtMemory=10;for(let e=0;e<this.dtMemory;++e)this.lastDts.push(1);this.lastFrame=performance.now(),this.fps=0,this.values=[],this.n=100,this.curSize=this.n,this.maxInd=0,this.i=0,this.j=0,this.firstFlip=!1,this.secondFlip=!1,this.flipsCounter=0,this.itersCounter=0,this.stepsPerFrame=5,this.finished=!1}setup(t){t&&(this.n=t.n,this.stepsPerFrame=t.stepsPerFrame),this.curSize=this.n,this.maxInd=0,this.i=0,this.j=0,this.firstFlip=!1,this.secondFlip=!1,this.finished=!1,this.flipsCounter=0,this.itersCounter=0,this.values=[];for(let e=1;e<=this.n;++e)this.values.push(e);w(this.values),window.requestAnimationFrame(()=>this.draw())}draw(){this.painter.background("#282a36");for(let t=0;t<this.stepsPerFrame;++t)this.pancakeSortStep();this.renderValues(),this.updateDt(),this.finished?this.fps=0:window.requestAnimationFrame(()=>this.draw())}updateDt(){const t=performance.now(),e=t-this.lastFrame;this.lastFrame=t,this.lastDts.push(e);const r=this.lastDts.shift();r&&(this.dt-=r/this.dtMemory,this.dt+=e/this.dtMemory),this.fps=Math.round(1e3/this.dt),this.fps-=this.fps%5}renderValues(){const t=this.width/this.n,e=this.height;let r=this.values[0];for(let h=1;h<this.n;++h)this.values[h]>r&&(r=this.values[h]);const u=e/r;for(let h=0;h<this.n;++h){this.painter.setStrokeWeight(t+1),this.painter.stroke("#f8f8f2"),h==this.curSize?this.painter.stroke("#ff79c6"):h==this.i?this.painter.stroke("#8be9fd"):h==this.j?this.painter.stroke("#ffb86c"):h==this.maxInd&&this.painter.stroke("#ff5555"),(h==this.curSize||h==this.i||h==this.j)&&!this.finished&&this.painter.setStrokeWeight(Math.max(t+1,7)),this.finished&&this.painter.stroke("#50fa7b");const l=u*this.values[h];this.painter.line(h*t+t/2,this.height-l,h*t+t/2,this.height)}}pancakeSortStep(){if(this.curSize<=1){this.finished=!0;return}if(this.itersCounter++,this.i<this.curSize-1)this.i++,this.values[this.i]>this.values[this.maxInd]&&(this.maxInd=this.i);else if(this.firstFlip)if(this.secondFlip)this.i=0,this.curSize--,this.maxInd=0,this.firstFlip=!1,this.secondFlip=!1;else if(this.j<Math.floor(this.curSize/2)){const t=this.values[this.j];this.values[this.j]=this.values[this.curSize-this.j-1],this.values[this.curSize-this.j-1]=t,this.j++}else this.secondFlip=!0,this.flipsCounter++,this.j=0;else if(this.j<Math.floor((this.maxInd+1)/2)){const t=this.values[this.j];this.values[this.j]=this.values[this.maxInd-this.j],this.values[this.maxInd-this.j]=t,this.j++}else this.firstFlip=!0,this.flipsCounter++,this.j=0}}const C=y({name:"PancakeSort",data:()=>({canvasWidth:2e3,canvasHeight:1125,sketch:{},n:100,stepsPerFrame:5}),mounted(){const s=document.getElementById("sketch");s&&F.isCanvas(s)&&(this.sketch=new _(s),this.sketch.setup())}});const z={class:"sort-page"},x=a("h1",{style:{"margin-top":"20px"}},[a("a",{href:"https://en.wikipedia.org/wiki/Pancake_sorting"},"Pancake Sort")],-1),I=a("h3",null,"Time complexity O(nÂ²)",-1),V=a("h3",null,"Flip operations O(n)",-1),D=a("h3",{style:{"margin-bottom":"20px"}},"Space complexity O(1)",-1),M={class:"stats"},b={key:0},B=["width","height"],N={class:"controls"},W={style:{"font-size":"large"}},$=a("div",{style:{height:"20px"}},null,-1),H={style:{"font-size":"large"}};function T(s,t,e,r,u,h){return f(),m("div",z,[x,I,V,D,a("div",M,[n(d,null,{default:c(()=>[a("span",null,o(s.sketch.flipsCounter)+" flips",1),n(p),a("span",null,o(s.sketch.itersCounter)+" iterations",1),n(p),s.sketch.values?(f(),m("span",b,"N: "+o(s.sketch.values.length),1)):j("",!0),n(p),a("span",null,"Steps per frame: "+o(s.sketch.stepsPerFrame),1)]),_:1})]),a("canvas",{id:"sketch",width:s.canvasWidth,height:s.canvasHeight},null,8,B),a("span",null,"FPS: "+o(s.sketch.fps),1),a("div",N,[n(d,null,{default:c(()=>[a("button",{onClick:t[0]||(t[0]=l=>s.sketch.setup({n:s.n,stepsPerFrame:s.stepsPerFrame}))}," START "),n(p),a("span",W,"N: "+o(s.n),1),n(p),k(a("input",{style:{width:"min(100%, 800px)"},"onUpdate:modelValue":t[1]||(t[1]=l=>s.n=l),type:"range",min:"10",max:"2000",step:"10"},null,512),[[v,s.n]]),$,a("span",H,"Steps per frame: "+o(s.stepsPerFrame),1),n(p),k(a("input",{style:{width:"min(100%, 800px)"},"onUpdate:modelValue":t[2]||(t[2]=l=>s.stepsPerFrame=l),type:"range",min:"1",max:"5000",step:"1"},null,512),[[v,s.stepsPerFrame]])]),_:1})])])}const R=P(C,[["render",T]]);export{R as default};
