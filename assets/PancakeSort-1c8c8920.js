var v=Object.defineProperty;var g=(t,s,i)=>s in t?v(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i;var e=(t,s,i)=>(g(t,typeof s!="symbol"?s+"":s,i),i);import{P as F,S as C,V as d,a as l,b as m}from"./VSlider-535596be.js";import{s as P}from"./shuffle-dbe9666a.js";import{d as _,_ as j,$ as w,R as c,a0 as k,a1 as a,b as n,U as S,W as o,a3 as y}from"./index-6f0bb6af.js";import"./VGrid-287f6910.js";class V{constructor(s){e(this,"painter");e(this,"width");e(this,"height");e(this,"dt");e(this,"lastDts");e(this,"dtMemory");e(this,"lastFrame");e(this,"fps");e(this,"values");e(this,"n");e(this,"curSize");e(this,"maxInd");e(this,"i");e(this,"j");e(this,"firstFlip");e(this,"secondFlip");e(this,"flipsCounter");e(this,"itersCounter");e(this,"stepsPerFrame");e(this,"finished");this.painter=new F(s),this.width=s.width,this.height=s.height,this.dt=1,this.lastDts=[],this.dtMemory=10;for(let i=0;i<this.dtMemory;++i)this.lastDts.push(1);this.lastFrame=performance.now(),this.fps=0,this.values=[],this.n=100,this.curSize=this.n,this.maxInd=0,this.i=0,this.j=0,this.firstFlip=!1,this.secondFlip=!1,this.flipsCounter=0,this.itersCounter=0,this.stepsPerFrame=5,this.finished=!1}setup(s){s&&(this.n=s.n,this.stepsPerFrame=s.stepsPerFrame),this.curSize=this.n,this.maxInd=0,this.i=0,this.j=0,this.firstFlip=!1,this.secondFlip=!1,this.finished=!1,this.flipsCounter=0,this.itersCounter=0,this.values=[];for(let i=1;i<=this.n;++i)this.values.push(i);P(this.values),window.requestAnimationFrame(()=>this.draw())}draw(){this.painter.background("#282a36");for(let s=0;s<this.stepsPerFrame;++s)this.pancakeSortStep();this.renderValues(),this.updateDt(),this.finished?this.fps=0:window.requestAnimationFrame(()=>this.draw())}updateDt(){const s=performance.now(),i=s-this.lastFrame;this.lastFrame=s,this.lastDts.push(i);const r=this.lastDts.shift();r&&(this.dt-=r/this.dtMemory,this.dt+=i/this.dtMemory),this.fps=Math.round(1e3/this.dt),this.fps-=this.fps%5}renderValues(){const s=this.width/this.n,i=this.height;let r=this.values[0];for(let h=1;h<this.n;++h)this.values[h]>r&&(r=this.values[h]);const u=i/r;for(let h=0;h<this.n;++h){this.painter.setStrokeWeight(s+1),this.painter.stroke("#f8f8f2"),h==this.curSize?this.painter.stroke("#ff79c6"):h==this.i?this.painter.stroke("#8be9fd"):h==this.j?this.painter.stroke("#ffb86c"):h==this.maxInd&&this.painter.stroke("#ff5555"),(h==this.curSize||h==this.i||h==this.j)&&!this.finished&&this.painter.setStrokeWeight(Math.max(s+1,7)),this.finished&&this.painter.stroke("#50fa7b");const f=u*this.values[h];this.painter.line(h*s+s/2,this.height-f,h*s+s/2,this.height)}}pancakeSortStep(){if(this.curSize<=1){this.finished=!0;return}if(this.itersCounter++,this.i<this.curSize-1)this.i++,this.values[this.i]>this.values[this.maxInd]&&(this.maxInd=this.i);else if(this.firstFlip)if(this.secondFlip)this.i=0,this.curSize--,this.maxInd=0,this.firstFlip=!1,this.secondFlip=!1;else if(this.j<Math.floor(this.curSize/2)){const s=this.values[this.j];this.values[this.j]=this.values[this.curSize-this.j-1],this.values[this.curSize-this.j-1]=s,this.j++}else this.secondFlip=!0,this.flipsCounter++,this.j=0;else if(this.j<Math.floor((this.maxInd+1)/2)){const s=this.values[this.j];this.values[this.j]=this.values[this.maxInd-this.j],this.values[this.maxInd-this.j]=s,this.j++}else this.firstFlip=!0,this.flipsCounter++,this.j=0}}const z=_({name:"PancakeSort",components:{SketchCanvas:C},data:()=>({sketch:{},n:100,stepsPerFrame:5}),mounted(){const t=document.getElementById("sketch");t&&F.isCanvas(t)&&(this.sketch=new V(t),this.sketch.setup())}});const b={class:"sort-page"},I=a("h1",{style:{"margin-top":"20px"}},[a("a",{href:"https://en.wikipedia.org/wiki/Pancake_sorting"},"Pancake Sort")],-1),x=a("h3",null,"Time complexity O(nÂ²)",-1),D=a("h3",null,"Flip operations O(n)",-1),M=a("h3",{style:{"margin-bottom":"20px"}},"Space complexity O(1)",-1),$={class:"stats"},B={key:0},N={class:"controls"},W={style:{"font-size":"large"}},A={style:{"font-size":"large"}};function O(t,s,i,r,u,h){const f=w("SketchCanvas");return c(),k("div",b,[I,x,D,M,a("div",$,[n(d,null,{default:S(()=>[a("span",null,o(t.sketch.flipsCounter)+" flips",1),n(l),a("span",null,o(t.sketch.itersCounter)+" iterations",1),n(l),t.sketch.values?(c(),k("span",B,"N: "+o(t.sketch.values.length),1)):y("",!0),n(l),a("span",null,"Steps per frame: "+o(t.sketch.stepsPerFrame),1)]),_:1})]),n(f,{style:{width:"100%"}}),a("span",null,"FPS: "+o(t.sketch.fps),1),a("div",N,[n(d,null,{default:S(()=>[a("button",{onClick:s[0]||(s[0]=p=>t.sketch.setup({n:t.n,stepsPerFrame:t.stepsPerFrame}))}," START "),n(l),a("span",W,"N: "+o(t.n),1),n(l),n(m,{modelValue:t.n,"onUpdate:modelValue":s[1]||(s[1]=p=>t.n=p),min:"10",max:"2000",step:"10",color:"#50fa7b","thumb-color":"#f8f8f2"},null,8,["modelValue"]),a("span",A,"Steps per frame: "+o(t.stepsPerFrame),1),n(l),n(m,{modelValue:t.stepsPerFrame,"onUpdate:modelValue":s[2]||(s[2]=p=>t.stepsPerFrame=p),min:"1",max:"5000",step:"1",color:"#50fa7b","thumb-color":"#f8f8f2"},null,8,["modelValue"])]),_:1})])])}const R=j(z,[["render",O]]);export{R as default};
