var k=Object.defineProperty;var g=(e,s,t)=>s in e?k(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var h=(e,s,t)=>(g(e,typeof s!="symbol"?s+"":s,t),t);import{P as C,S as y,V as f,a as c,b as m}from"./VSlider-535596be.js";import{s as V}from"./shuffle-dbe9666a.js";import{s as l}from"./sleep-9eff569f.js";import{d as w,_,$ as b,R as P,a0 as S,a1 as o,b as r,U as v,W as d,a3 as H}from"./index-6f0bb6af.js";import"./VGrid-287f6910.js";class ${constructor(s){h(this,"painter");h(this,"width");h(this,"height");h(this,"values");h(this,"n");h(this,"hn");h(this,"hi");h(this,"stepsPer100ms");h(this,"stepsPer10ms");h(this,"compsCounter");h(this,"stepsCounter");h(this,"finished");h(this,"curPid");this.painter=new C(s),this.width=s.width,this.height=s.height,this.values=[],this.n=100,this.hn=0,this.hi=0,this.stepsPer100ms=5,this.stepsPer10ms=1/0,this.compsCounter=0,this.stepsCounter=0,this.finished=!1,this.curPid=0}setup(s){s&&(this.n=s.n,s.stepsPerSecond<100?(this.stepsPer100ms=Math.round(s.stepsPerSecond/10),this.stepsPer10ms=1/0):(this.stepsPer10ms=Math.round(s.stepsPerSecond/100),this.stepsPer100ms=1/0)),this.finished=!1,this.compsCounter=0,this.stepsCounter=0,this.values=[];for(let t=1;t<=this.n;++t)this.values.push(t);V(this.values),this.curPid++,this.heapSort(this.curPid)}async heapSort(s){if(s==this.curPid){for(let t=Math.floor(this.n/2)-1;t>=0;--t){if(s!=this.curPid)return;this.compsCounter++,this.stepsCounter++,this.stepsCounter%this.stepsPer100ms==0?(this.renderValues(),await l(100)):this.stepsCounter%this.stepsPer10ms==0&&(this.renderValues(),await l(10)),await this.heapify(s,this.n,t)}for(let t=this.n-1;t>0;--t){if(s!=this.curPid)return;this.compsCounter++,this.stepsCounter++,this.stepsCounter%this.stepsPer100ms==0?(this.renderValues(),await l(100)):this.stepsCounter%this.stepsPer10ms==0&&(this.renderValues(),await l(10));const n=this.values[0];this.values[0]=this.values[t],this.values[t]=n,await this.heapify(s,t,0)}this.finished=!0,this.renderValues()}}async heapify(s,t,n){if(s!=this.curPid)return;this.hn=t,this.hi=n,this.stepsCounter++,this.compsCounter+=3,this.stepsCounter%this.stepsPer100ms==0?(this.renderValues(),await l(100)):this.stepsCounter%this.stepsPer10ms==0&&(this.renderValues(),await l(10));let i=n;const a=2*n+1,u=2*n+2;if(a<t&&this.values[a]>this.values[i]&&(i=a),u<t&&this.values[u]>this.values[i]&&(i=u),i!=n){const p=this.values[n];this.values[n]=this.values[i],this.values[i]=p,await this.heapify(s,t,i)}}renderValues(){this.painter.background("#282a36");const s=this.width/this.n,n=this.height/this.n;for(let i=0;i<this.n;++i){this.painter.setStrokeWeight(s+1),this.painter.stroke("#f8f8f2"),i==this.hi?this.painter.stroke("#8be9fd"):i==this.hn&&this.painter.stroke("#ffb86c"),(i==this.hi||i==this.hn)&&!this.finished&&this.painter.setStrokeWeight(Math.max(s+1,7)),this.finished&&this.painter.stroke("#50fa7b");const a=n*this.values[i];this.painter.line(i*s+s/2,this.height-a,i*s+s/2,this.height)}}}const N=w({name:"HeapSort",components:{SketchCanvas:y},data:()=>({sketch:{},n:100,stepsPerSecond:50}),mounted(){const e=document.getElementById("sketch");e&&C.isCanvas(e)&&(this.sketch=new $(e),this.sketch.setup())}});const B={class:"sort-page"},I=o("h1",{style:{"margin-top":"20px"}},[o("a",{href:"https://en.wikipedia.org/wiki/Heapsort"},"Heap Sort")],-1),M=o("h3",null,"Time complexity O(n log n)",-1),W=o("h3",{style:{"margin-bottom":"20px"}},"Space complexity O(1)",-1),T={class:"stats"},U={key:0},z={class:"controls"},E={style:{"font-size":"large"}},O={style:{"font-size":"large"}};function R(e,s,t,n,i,a){const u=b("SketchCanvas");return P(),S("div",B,[I,M,W,o("div",T,[r(f,null,{default:v(()=>[o("span",null,d(e.sketch.compsCounter)+" comparisons",1),r(c),e.sketch.values?(P(),S("span",U,"N: "+d(e.sketch.values.length),1)):H("",!0),r(c),o("span",null,"Steps per second: "+d(e.stepsPerSecond),1)]),_:1})]),r(u,{style:{width:"100%"}}),o("div",z,[r(f,null,{default:v(()=>[o("button",{onClick:s[0]||(s[0]=p=>e.sketch.setup({n:e.n,stepsPerSecond:e.stepsPerSecond}))}," START "),r(c),o("span",E,"N: "+d(e.n),1),r(c),r(m,{modelValue:e.n,"onUpdate:modelValue":s[1]||(s[1]=p=>e.n=p),min:"10",max:"2000",step:"10",color:"#50fa7b","thumb-color":"#f8f8f2"},null,8,["modelValue"]),o("span",O,"Steps per second: "+d(e.stepsPerSecond),1),r(c),r(m,{modelValue:e.stepsPerSecond,"onUpdate:modelValue":s[2]||(s[2]=p=>e.stepsPerSecond=p),min:"10",max:"5000",step:"10",color:"#50fa7b","thumb-color":"#f8f8f2"},null,8,["modelValue"])]),_:1})])])}const G=_(N,[["render",R]]);export{G as default};
