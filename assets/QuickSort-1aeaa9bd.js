var _=Object.defineProperty;var C=(s,t,e)=>t in s?_(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var h=(s,t,e)=>(C(s,typeof t!="symbol"?t+"":t,e),e);import{P as w,V as d,a as p}from"./painter-e02e082b.js";import{s as y}from"./shuffle-dbe9666a.js";import{s as f}from"./sleep-9eff569f.js";import{d as V,_ as Q,o as m,f as v,j as i,i as a,w as k,t as c,k as B,l as g,v as S}from"./index-c9176d23.js";/* empty css              */class H{constructor(t){h(this,"painter");h(this,"width");h(this,"height");h(this,"values");h(this,"n");h(this,"low");h(this,"high");h(this,"stepsPer10ms");h(this,"compsCounter");h(this,"stepsCounter");h(this,"finished");h(this,"curPid");this.painter=new w(t),this.width=t.width,this.height=t.height,this.values=[],this.n=100,this.low=0,this.high=0,this.stepsPer10ms=1,this.compsCounter=0,this.stepsCounter=0,this.finished=!1,this.curPid=0}setup(t){t&&(this.n=t.n,this.stepsPer10ms=Math.round(t.stepsPerSecond/100)),this.finished=!1,this.low=0,this.high=0,this.compsCounter=0,this.stepsCounter=0,this.values=[];for(let e=1;e<=this.n;++e)this.values.push(e);y(this.values),this.curPid++,this.quickSort(this.curPid,0,this.n-1,!0)}async quickSort(t,e,o,n=!1){if(t==this.curPid){if(this.low=e,this.high=o,e<o){this.compsCounter++,this.stepsCounter++,this.stepsCounter%this.stepsPer10ms==0&&(this.renderValues(),await f(10));const r=await this.partition(t,e,o);await this.quickSort(t,e,r-1,!1),await this.quickSort(t,r+1,o,!1)}n&&t==this.curPid&&(this.finished=!0,this.renderValues())}}async partition(t,e,o){if(t!=this.curPid)return-1;const n=this.values[o];let r=e-1;for(let u=e;u<=o-1;u++){if(t!=this.curPid)return-1;if(this.compsCounter++,this.stepsCounter++,this.stepsCounter%this.stepsPer10ms==0&&(this.renderValues(),await f(10)),this.values[u]<n){r++;const P=this.values[r];this.values[r]=this.values[u],this.values[u]=P}}const l=this.values[r+1];return this.values[r+1]=this.values[o],this.values[o]=l,r+1}renderValues(){this.painter.background("#282a36");const t=this.width/this.n,o=this.height/this.n;for(let n=0;n<this.n;++n){this.painter.setStrokeWeight(t+1),this.painter.stroke("#f8f8f2"),n==this.low?this.painter.stroke("#ff79c6"):n==this.high&&this.painter.stroke("#ff79c6"),(n==this.low||n==this.high)&&!this.finished&&this.painter.setStrokeWeight(Math.max(t+1,7)),this.finished&&this.painter.stroke("#50fa7b");const r=o*this.values[n];this.painter.line(n*t+t/2,this.height-r,n*t+t/2,this.height)}}}const N=V({name:"QuickSort",data:()=>({canvasWidth:2e3,canvasHeight:1125,sketch:{},n:100,stepsPerSecond:100}),mounted(){const s=document.getElementById("sketch");s&&w.isCanvas(s)&&(this.sketch=new H(s),this.sketch.setup())}});const W={class:"sort-page"},$=i("h1",{style:{"margin-top":"20px"}},[i("a",{href:"https://en.wikipedia.org/wiki/Quicksort"},"Quick Sort")],-1),b=i("h3",null,"Time complexity",-1),q=i("h3",null,"O(nÂ²) - worst case",-1),x=i("h3",null,"O(n log n) - average",-1),T=i("h3",{style:{"margin-bottom":"20px"}},"Space complexity O(1)",-1),M={class:"stats"},O={key:0},j=["width","height"],z={class:"controls"},D={style:{"font-size":"large"}},E=i("div",{style:{height:"20px"}},null,-1),U={style:{"font-size":"large"}};function A(s,t,e,o,n,r){return m(),v("div",W,[$,b,q,x,T,i("div",M,[a(d,null,{default:k(()=>[i("span",null,c(s.sketch.compsCounter)+" comparisons",1),a(p),s.sketch.values?(m(),v("span",O,"N: "+c(s.sketch.values.length),1)):B("",!0),a(p),i("span",null,"Steps per second: "+c(s.stepsPerSecond),1)]),_:1})]),i("canvas",{id:"sketch",width:s.canvasWidth,height:s.canvasHeight},null,8,j),i("div",z,[a(d,null,{default:k(()=>[i("button",{onClick:t[0]||(t[0]=l=>s.sketch.setup({n:s.n,stepsPerSecond:s.stepsPerSecond}))}," START "),a(p),i("span",D,"N: "+c(s.n),1),a(p),g(i("input",{style:{width:"min(100%, 800px)"},"onUpdate:modelValue":t[1]||(t[1]=l=>s.n=l),type:"range",min:"10",max:"2000",step:"10"},null,512),[[S,s.n]]),E,i("span",U,"Steps per second: "+c(s.stepsPerSecond),1),a(p),g(i("input",{style:{width:"min(100%, 800px)"},"onUpdate:modelValue":t[2]||(t[2]=l=>s.stepsPerSecond=l),type:"range",min:"100",max:"10000",step:"100"},null,512),[[S,s.stepsPerSecond]])]),_:1})])])}const L=Q(N,[["render",A]]);export{L as default};
