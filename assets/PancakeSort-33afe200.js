var F=Object.defineProperty;var S=(t,s,i)=>s in t?F(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i;var e=(t,s,i)=>(S(t,typeof s!="symbol"?s+"":s,i),i);import{P as v,V as u,a as p,b as d}from"./VSlider-c608493c.js";import{s as g}from"./shuffle-dbe9666a.js";import{d as w,_ as P,o as m,f as c,j as a,i as n,w as k,t as o,k as j}from"./index-291fb8bf.js";/* empty css              */class _{constructor(s){e(this,"painter");e(this,"width");e(this,"height");e(this,"dt");e(this,"lastDts");e(this,"dtMemory");e(this,"lastFrame");e(this,"fps");e(this,"values");e(this,"n");e(this,"curSize");e(this,"maxInd");e(this,"i");e(this,"j");e(this,"firstFlip");e(this,"secondFlip");e(this,"flipsCounter");e(this,"itersCounter");e(this,"stepsPerFrame");e(this,"finished");this.painter=new v(s),this.width=s.width,this.height=s.height,this.dt=1,this.lastDts=[],this.dtMemory=10;for(let i=0;i<this.dtMemory;++i)this.lastDts.push(1);this.lastFrame=performance.now(),this.fps=0,this.values=[],this.n=100,this.curSize=this.n,this.maxInd=0,this.i=0,this.j=0,this.firstFlip=!1,this.secondFlip=!1,this.flipsCounter=0,this.itersCounter=0,this.stepsPerFrame=5,this.finished=!1}setup(s){s&&(this.n=s.n,this.stepsPerFrame=s.stepsPerFrame),this.curSize=this.n,this.maxInd=0,this.i=0,this.j=0,this.firstFlip=!1,this.secondFlip=!1,this.finished=!1,this.flipsCounter=0,this.itersCounter=0,this.values=[];for(let i=1;i<=this.n;++i)this.values.push(i);g(this.values),window.requestAnimationFrame(()=>this.draw())}draw(){this.painter.background("#282a36");for(let s=0;s<this.stepsPerFrame;++s)this.pancakeSortStep();this.renderValues(),this.updateDt(),this.finished?this.fps=0:window.requestAnimationFrame(()=>this.draw())}updateDt(){const s=performance.now(),i=s-this.lastFrame;this.lastFrame=s,this.lastDts.push(i);const r=this.lastDts.shift();r&&(this.dt-=r/this.dtMemory,this.dt+=i/this.dtMemory),this.fps=Math.round(1e3/this.dt),this.fps-=this.fps%5}renderValues(){const s=this.width/this.n,i=this.height;let r=this.values[0];for(let h=1;h<this.n;++h)this.values[h]>r&&(r=this.values[h]);const f=i/r;for(let h=0;h<this.n;++h){this.painter.setStrokeWeight(s+1),this.painter.stroke("#f8f8f2"),h==this.curSize?this.painter.stroke("#ff79c6"):h==this.i?this.painter.stroke("#8be9fd"):h==this.j?this.painter.stroke("#ffb86c"):h==this.maxInd&&this.painter.stroke("#ff5555"),(h==this.curSize||h==this.i||h==this.j)&&!this.finished&&this.painter.setStrokeWeight(Math.max(s+1,7)),this.finished&&this.painter.stroke("#50fa7b");const l=f*this.values[h];this.painter.line(h*s+s/2,this.height-l,h*s+s/2,this.height)}}pancakeSortStep(){if(this.curSize<=1){this.finished=!0;return}if(this.itersCounter++,this.i<this.curSize-1)this.i++,this.values[this.i]>this.values[this.maxInd]&&(this.maxInd=this.i);else if(this.firstFlip)if(this.secondFlip)this.i=0,this.curSize--,this.maxInd=0,this.firstFlip=!1,this.secondFlip=!1;else if(this.j<Math.floor(this.curSize/2)){const s=this.values[this.j];this.values[this.j]=this.values[this.curSize-this.j-1],this.values[this.curSize-this.j-1]=s,this.j++}else this.secondFlip=!0,this.flipsCounter++,this.j=0;else if(this.j<Math.floor((this.maxInd+1)/2)){const s=this.values[this.j];this.values[this.j]=this.values[this.maxInd-this.j],this.values[this.maxInd-this.j]=s,this.j++}else this.firstFlip=!0,this.flipsCounter++,this.j=0}}const C=w({name:"PancakeSort",data:()=>({canvasWidth:2e3,canvasHeight:1125,sketch:{},n:100,stepsPerFrame:5}),mounted(){const t=document.getElementById("sketch");t&&v.isCanvas(t)&&(this.sketch=new _(t),this.sketch.setup())}});const y={class:"sort-page"},V=a("h1",{style:{"margin-top":"20px"}},[a("a",{href:"https://en.wikipedia.org/wiki/Pancake_sorting"},"Pancake Sort")],-1),z=a("h3",null,"Time complexity O(nÂ²)",-1),b=a("h3",null,"Flip operations O(n)",-1),I=a("h3",{style:{"margin-bottom":"20px"}},"Space complexity O(1)",-1),D={class:"stats"},M={key:0},x=["width","height"],B={class:"controls"},N={style:{"font-size":"large"}},W={style:{"font-size":"large"}};function $(t,s,i,r,f,h){return m(),c("div",y,[V,z,b,I,a("div",D,[n(u,null,{default:k(()=>[a("span",null,o(t.sketch.flipsCounter)+" flips",1),n(p),a("span",null,o(t.sketch.itersCounter)+" iterations",1),n(p),t.sketch.values?(m(),c("span",M,"N: "+o(t.sketch.values.length),1)):j("",!0),n(p),a("span",null,"Steps per frame: "+o(t.sketch.stepsPerFrame),1)]),_:1})]),a("canvas",{id:"sketch",width:t.canvasWidth,height:t.canvasHeight},null,8,x),a("span",null,"FPS: "+o(t.sketch.fps),1),a("div",B,[n(u,null,{default:k(()=>[a("button",{onClick:s[0]||(s[0]=l=>t.sketch.setup({n:t.n,stepsPerFrame:t.stepsPerFrame}))}," START "),n(p),a("span",N,"N: "+o(t.n),1),n(p),n(d,{modelValue:t.n,"onUpdate:modelValue":s[1]||(s[1]=l=>t.n=l),min:"10",max:"2000",step:"10",color:"#50fa7b","thumb-color":"#f8f8f2"},null,8,["modelValue"]),a("span",W,"Steps per frame: "+o(t.stepsPerFrame),1),n(p),n(d,{modelValue:t.stepsPerFrame,"onUpdate:modelValue":s[2]||(s[2]=l=>t.stepsPerFrame=l),min:"1",max:"5000",step:"1",color:"#50fa7b","thumb-color":"#f8f8f2"},null,8,["modelValue"])]),_:1})])])}const E=P(C,[["render",$]]);export{E as default};
