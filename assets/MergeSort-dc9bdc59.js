var y=Object.defineProperty;var b=(t,s,e)=>s in t?y(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var r=(t,s,e)=>(b(t,typeof s!="symbol"?s+"":s,e),e);import{P as _,S as M,V as S,a as d,b as k}from"./VSlider-535596be.js";import{s as $}from"./shuffle-dbe9666a.js";import{s as g}from"./sleep-9eff569f.js";import{d as N,_ as B,$ as W,R as v,a0 as w,a1 as h,b as a,U as V,W as C,a3 as A}from"./index-6f0bb6af.js";import"./VGrid-287f6910.js";class H{constructor(s){r(this,"painter");r(this,"width");r(this,"height");r(this,"values");r(this,"n");r(this,"l");r(this,"m");r(this,"r");r(this,"stepsPer10ms");r(this,"compsCounter");r(this,"stepsCounter");r(this,"finished");r(this,"curPid");this.painter=new _(s),this.width=s.width,this.height=s.height,this.values=[],this.n=100,this.l=0,this.m=0,this.r=0,this.stepsPer10ms=1,this.compsCounter=0,this.stepsCounter=0,this.finished=!1,this.curPid=0}setup(s){s&&(this.n=s.n,this.stepsPer10ms=Math.round(s.stepsPerSecond/100)),this.finished=!1,this.compsCounter=0,this.stepsCounter=0,this.l=0,this.m=0,this.r=0,this.values=[];for(let e=1;e<=this.n;++e)this.values.push(e);$(this.values),this.curPid++,this.mergeSort(this.curPid,0,this.n-1,!0)}async mergeSort(s,e,n,i=!1){if(s!=this.curPid||(this.stepsCounter++,this.compsCounter++,e>=n))return;const o=e+Math.floor((n-e)/2);await this.mergeSort(s,e,o),s==this.curPid&&(await this.mergeSort(s,o+1,n),s==this.curPid&&(await this.merge(s,e,o,n),s==this.curPid&&i&&(this.finished=!0,this.renderValues())))}async merge(s,e,n,i){if(s!=this.curPid)return;this.l=e,this.m=n,this.r=i,this.stepsCounter++;const o=n-e+1,m=i-n,u=new Array(o),P=new Array(m);for(let l=0;l<o;l++){if(s!=this.curPid)return;this.stepsCounter++,this.compsCounter++,u[l]=this.values[e+l],this.stepsCounter%this.stepsPer10ms==0&&(this.renderValues(),await g(10))}for(let l=0;l<m;l++){if(s!=this.curPid)return;this.stepsCounter++,this.compsCounter++,P[l]=this.values[n+1+l],this.stepsCounter%this.stepsPer10ms==0&&(this.renderValues(),await g(10))}let p=0,c=0,f=e;for(;p<o&&c<m;){if(s!=this.curPid)return;this.stepsCounter++,this.compsCounter++,u[p]<=P[c]?(this.values[f]=u[p],p++):(this.values[f]=P[c],c++),f++,this.stepsCounter%this.stepsPer10ms==0&&(this.renderValues(),await g(10))}for(;p<o;){if(s!=this.curPid)return;this.stepsCounter++,this.compsCounter++,this.values[f]=u[p],p++,f++,this.stepsCounter%this.stepsPer10ms==0&&(this.renderValues(),await g(10))}for(;c<m;){if(s!=this.curPid)return;this.stepsCounter++,this.compsCounter++,this.values[f]=P[c],c++,f++,this.stepsCounter%this.stepsPer10ms==0&&(this.renderValues(),await g(10))}}renderValues(){this.painter.background("#282a36");const s=this.width/this.n,n=this.height/this.n;for(let i=0;i<this.n;++i){this.painter.setStrokeWeight(s+1),this.painter.stroke("#f8f8f2"),i==this.l?this.painter.stroke("#ff79c6"):i==this.m?this.painter.stroke("#ff5555"):i==this.r&&this.painter.stroke("#ff79c6"),(i==this.l||i==this.m||i==this.r)&&!this.finished&&this.painter.setStrokeWeight(Math.max(s+1,7)),this.finished&&this.painter.stroke("#50fa7b");const o=n*this.values[i];this.painter.line(i*s+s/2,this.height-o,i*s+s/2,this.height)}}}const R=N({name:"MergeSort",components:{SketchCanvas:M},data:()=>({sketch:{},n:100,stepsPerSecond:100}),mounted(){const t=document.getElementById("sketch");t&&_.isCanvas(t)&&(this.sketch=new H(t),this.sketch.setup())}});const T={class:"sort-page"},U=h("h1",{style:{"margin-top":"20px"}},[h("a",{href:"https://en.wikipedia.org/wiki/Merge_sort"},"Merge Sort")],-1),j=h("h3",null,"Time complexity O(n log n)",-1),z=h("h3",{style:{"margin-bottom":"20px"}},"Space complexity O(n)",-1),E={class:"stats"},O={key:0},x={class:"controls"},D={style:{"font-size":"large"}},I={style:{"font-size":"large"}};function L(t,s,e,n,i,o){const m=W("SketchCanvas");return v(),w("div",T,[U,j,z,h("div",E,[a(S,null,{default:V(()=>[h("span",null,C(t.sketch.compsCounter)+" comparisons",1),a(d),t.sketch.values?(v(),w("span",O,"N: "+C(t.sketch.values.length),1)):A("",!0),a(d),h("span",null,"Steps per second: "+C(t.stepsPerSecond),1)]),_:1})]),a(m,{style:{width:"100%"}}),h("div",x,[a(S,null,{default:V(()=>[h("button",{onClick:s[0]||(s[0]=u=>t.sketch.setup({n:t.n,stepsPerSecond:t.stepsPerSecond}))}," START "),a(d),h("span",D,"N: "+C(t.n),1),a(d),a(k,{modelValue:t.n,"onUpdate:modelValue":s[1]||(s[1]=u=>t.n=u),min:"10",max:"2000",step:"10",color:"#50fa7b","thumb-color":"#f8f8f2"},null,8,["modelValue"]),h("span",I,"Steps per second: "+C(t.stepsPerSecond),1),a(d),a(k,{modelValue:t.stepsPerSecond,"onUpdate:modelValue":s[2]||(s[2]=u=>t.stepsPerSecond=u),min:"100",max:"30000",step:"100",color:"#50fa7b","thumb-color":"#f8f8f2"},null,8,["modelValue"])]),_:1})])])}const X=B(R,[["render",L]]);export{X as default};
